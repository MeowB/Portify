import './ProjectCard.scss'
import type { ProjectType } from '../../types/Project.tsx'
import { deleteProject } from '../../api/projects.ts'
import { useNavigate } from 'react-router-dom'

const ProjectCard = ({ type, project, setSelectedProject, setIsEditing }: { type: string, project: ProjectType, setSelectedProject?: (project: ProjectType | null) => void, setIsEditing?: (isEditing: boolean) => void }) => {

	const navigate = useNavigate()

	const handleClickDelete = async () => {
		try {
			const token = localStorage.getItem('token')
			const result = await deleteProject(project, token)
			console.log(result.data)
		} catch (error) {
			console.error('Error deleting project', error)
		}
	}

	return (
		<div className="project">
			<div className="image-wrapper">
				<img src={project.imageUrl} alt="" />
			</div>
			<div className="project-content">
				<div className="project-text">
					<h3 className='project-title'>{project.projectName}</h3>
					<p className="description">
						{project.description}
					</p>
				</div>
				{type === 'settings' ? (
					<div className='card-buttons'>
						<button className="edit-button"
							onClick={() => {
								setSelectedProject?.(null);
								setIsEditing?.(false);
								setTimeout(() => {
									setSelectedProject?.(project);
									setIsEditing?.(true);
								}, 0);
							}}>
							<span>
								<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
									<path d="M14.6667 4.82672C14.6672 4.73898 14.6503 4.65201 14.6172 4.57078C14.584 4.48956 14.5351 4.41568 14.4733 4.35339L11.6467 1.52672C11.5844 1.46493 11.5105 1.41605 11.4293 1.38287C11.348 1.34969 11.2611 1.33288 11.1733 1.33339C11.0856 1.33288 10.9986 1.34969 10.9174 1.38287C10.8362 1.41605 10.7623 1.46493 10.7 1.52672L8.81332 3.41338L1.52666 10.7001C1.46487 10.7623 1.41599 10.8362 1.38281 10.9174C1.34963 10.9987 1.33282 11.0856 1.33332 11.1734V14.0001C1.33332 14.1769 1.40356 14.3464 1.52859 14.4715C1.65361 14.5965 1.82318 14.6667 1.99999 14.6667H4.82666C4.91994 14.6718 5.01325 14.6572 5.10054 14.6239C5.18782 14.5906 5.26713 14.5393 5.33332 14.4734L12.58 7.18672L14.4733 5.33338C14.5342 5.26877 14.5838 5.19441 14.62 5.11338C14.6264 5.06025 14.6264 5.00652 14.62 4.95338C14.6231 4.92235 14.6231 4.89108 14.62 4.86005L14.6667 4.82672ZM4.55332 13.3334H2.66666V11.4467L9.28666 4.82672L11.1733 6.71339L4.55332 13.3334ZM12.1133 5.77338L10.2267 3.88672L11.1733 2.94672L13.0533 4.82672L12.1133 5.77338Z" fill="#20293A" />
								</svg>
							</span>
							Edit
						</button>

						<button className="delete-button"
							onClick={() => {
								handleClickDelete()
								navigate(0)
								}}>
							<span>
								<svg width="16" height="16" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
									<path d="M8.33333 15C8.55435 15 8.76631 14.9122 8.92259 14.7559C9.07887 14.5996 9.16667 14.3876 9.16667 14.1666V9.16663C9.16667 8.94561 9.07887 8.73365 8.92259 8.57737C8.76631 8.42109 8.55435 8.33329 8.33333 8.33329C8.11232 8.33329 7.90036 8.42109 7.74408 8.57737C7.5878 8.73365 7.5 8.94561 7.5 9.16663V14.1666C7.5 14.3876 7.5878 14.5996 7.74408 14.7559C7.90036 14.9122 8.11232 15 8.33333 15ZM16.6667 4.99996H13.3333V4.16663C13.3333 3.50358 13.0699 2.8677 12.6011 2.39886C12.1323 1.93002 11.4964 1.66663 10.8333 1.66663H9.16667C8.50363 1.66663 7.86774 1.93002 7.3989 2.39886C6.93006 2.8677 6.66667 3.50358 6.66667 4.16663V4.99996H3.33333C3.11232 4.99996 2.90036 5.08776 2.74408 5.24404C2.5878 5.40032 2.5 5.61228 2.5 5.83329C2.5 6.05431 2.5878 6.26627 2.74408 6.42255C2.90036 6.57883 3.11232 6.66663 3.33333 6.66663H4.16667V15.8333C4.16667 16.4963 4.43006 17.1322 4.8989 17.6011C5.36774 18.0699 6.00363 18.3333 6.66667 18.3333H13.3333C13.9964 18.3333 14.6323 18.0699 15.1011 17.6011C15.5699 17.1322 15.8333 16.4963 15.8333 15.8333V6.66663H16.6667C16.8877 6.66663 17.0996 6.57883 17.2559 6.42255C17.4122 6.26627 17.5 6.05431 17.5 5.83329C17.5 5.61228 17.4122 5.40032 17.2559 5.24404C17.0996 5.08776 16.8877 4.99996 16.6667 4.99996ZM8.33333 4.16663C8.33333 3.94561 8.42113 3.73365 8.57741 3.57737C8.73369 3.42109 8.94565 3.33329 9.16667 3.33329H10.8333C11.0543 3.33329 11.2663 3.42109 11.4226 3.57737C11.5789 3.73365 11.6667 3.94561 11.6667 4.16663V4.99996H8.33333V4.16663ZM14.1667 15.8333C14.1667 16.0543 14.0789 16.2663 13.9226 16.4225C13.7663 16.5788 13.5543 16.6666 13.3333 16.6666H6.66667C6.44565 16.6666 6.23369 16.5788 6.07741 16.4225C5.92113 16.2663 5.83333 16.0543 5.83333 15.8333V6.66663H14.1667V15.8333ZM11.6667 15C11.8877 15 12.0996 14.9122 12.2559 14.7559C12.4122 14.5996 12.5 14.3876 12.5 14.1666V9.16663C12.5 8.94561 12.4122 8.73365 12.2559 8.57737C12.0996 8.42109 11.8877 8.33329 11.6667 8.33329C11.4457 8.33329 11.2337 8.42109 11.0774 8.57737C10.9211 8.73365 10.8333 8.94561 10.8333 9.16663V14.1666C10.8333 14.3876 10.9211 14.5996 11.0774 14.7559C11.2337 14.9122 11.4457 15 11.6667 15Z" fill="#DD524C" />
								</svg>

							</span>
							delete
						</button>
					</div>
				) : (
					<>
						<button onClick={() => window.open(project.demoUrl, '_blank')} className="demo-button">
							Demo URL
							<span>
								<svg width="12" height="12" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
									<path d="M8 4.41C7.86739 4.41 7.74021 4.46268 7.64645 4.55645C7.55268 4.65021 7.5 4.77739 7.5 4.91V8.5C7.5 8.63261 7.44732 8.75979 7.35355 8.85355C7.25979 8.94732 7.13261 9 7 9H1.5C1.36739 9 1.24021 8.94732 1.14645 8.85355C1.05268 8.75979 1 8.63261 1 8.5V3C1 2.86739 1.05268 2.74021 1.14645 2.64645C1.24021 2.55268 1.36739 2.5 1.5 2.5H5.09C5.22261 2.5 5.34979 2.44732 5.44355 2.35355C5.53732 2.25979 5.59 2.13261 5.59 2C5.59 1.86739 5.53732 1.74021 5.44355 1.64645C5.34979 1.55268 5.22261 1.5 5.09 1.5H1.5C1.10218 1.5 0.720644 1.65804 0.43934 1.93934C0.158035 2.22064 0 2.60218 0 3V8.5C0 8.89782 0.158035 9.27936 0.43934 9.56066C0.720644 9.84196 1.10218 10 1.5 10H7C7.39782 10 7.77936 9.84196 8.06066 9.56066C8.34196 9.27936 8.5 8.89782 8.5 8.5V4.91C8.5 4.77739 8.44732 4.65021 8.35355 4.55645C8.25979 4.46268 8.13261 4.41 8 4.41ZM9.96 0.31C9.90926 0.187825 9.81217 0.0907374 9.69 0.04C9.62989 0.0143795 9.56534 0.000789994 9.5 0H6.5C6.36739 0 6.24021 0.0526784 6.14645 0.146447C6.05268 0.240215 6 0.367392 6 0.5C6 0.632608 6.05268 0.759785 6.14645 0.853553C6.24021 0.947322 6.36739 1 6.5 1H8.295L3.145 6.145C3.09814 6.19148 3.06094 6.24678 3.03555 6.30771C3.01017 6.36864 2.9971 6.43399 2.9971 6.5C2.9971 6.56601 3.01017 6.63136 3.03555 6.69229C3.06094 6.75322 3.09814 6.80852 3.145 6.855C3.19148 6.90186 3.24678 6.93906 3.30771 6.96445C3.36864 6.98983 3.43399 7.0029 3.5 7.0029C3.56601 7.0029 3.63136 6.98983 3.69229 6.96445C3.75322 6.93906 3.80852 6.90186 3.855 6.855L9 1.705V3.5C9 3.63261 9.05268 3.75979 9.14645 3.85355C9.24021 3.94732 9.36739 4 9.5 4C9.63261 4 9.75979 3.94732 9.85355 3.85355C9.94732 3.75979 10 3.63261 10 3.5V0.5C9.99921 0.434661 9.98562 0.370111 9.96 0.31V0.31Z" fill="#677489" />
								</svg>
							</span>
						</button>
						<button onClick={() => window.open(project.repositoryUrl, '_blank')} className="repository-button">
							Repository URL
							<span>
								<svg width="12" height="12" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
									<path d="M8 4.41C7.86739 4.41 7.74021 4.46268 7.64645 4.55645C7.55268 4.65021 7.5 4.77739 7.5 4.91V8.5C7.5 8.63261 7.44732 8.75979 7.35355 8.85355C7.25979 8.94732 7.13261 9 7 9H1.5C1.36739 9 1.24021 8.94732 1.14645 8.85355C1.05268 8.75979 1 8.63261 1 8.5V3C1 2.86739 1.05268 2.74021 1.14645 2.64645C1.24021 2.55268 1.36739 2.5 1.5 2.5H5.09C5.22261 2.5 5.34979 2.44732 5.44355 2.35355C5.53732 2.25979 5.59 2.13261 5.59 2C5.59 1.86739 5.53732 1.74021 5.44355 1.64645C5.34979 1.55268 5.22261 1.5 5.09 1.5H1.5C1.10218 1.5 0.720644 1.65804 0.43934 1.93934C0.158035 2.22064 0 2.60218 0 3V8.5C0 8.89782 0.158035 9.27936 0.43934 9.56066C0.720644 9.84196 1.10218 10 1.5 10H7C7.39782 10 7.77936 9.84196 8.06066 9.56066C8.34196 9.27936 8.5 8.89782 8.5 8.5V4.91C8.5 4.77739 8.44732 4.65021 8.35355 4.55645C8.25979 4.46268 8.13261 4.41 8 4.41ZM9.96 0.31C9.90926 0.187825 9.81217 0.0907374 9.69 0.04C9.62989 0.0143795 9.56534 0.000789994 9.5 0H6.5C6.36739 0 6.24021 0.0526784 6.14645 0.146447C6.05268 0.240215 6 0.367392 6 0.5C6 0.632608 6.05268 0.759785 6.14645 0.853553C6.24021 0.947322 6.36739 1 6.5 1H8.295L3.145 6.145C3.09814 6.19148 3.06094 6.24678 3.03555 6.30771C3.01017 6.36864 2.9971 6.43399 2.9971 6.5C2.9971 6.56601 3.01017 6.63136 3.03555 6.69229C3.06094 6.75322 3.09814 6.80852 3.145 6.855C3.19148 6.90186 3.24678 6.93906 3.30771 6.96445C3.36864 6.98983 3.43399 7.0029 3.5 7.0029C3.56601 7.0029 3.63136 6.98983 3.69229 6.96445C3.75322 6.93906 3.80852 6.90186 3.855 6.855L9 1.705V3.5C9 3.63261 9.05268 3.75979 9.14645 3.85355C9.24021 3.94732 9.36739 4 9.5 4C9.63261 4 9.75979 3.94732 9.85355 3.85355C9.94732 3.75979 10 3.63261 10 3.5V0.5C9.99921 0.434661 9.98562 0.370111 9.96 0.31V0.31Z" fill="#677489" />
								</svg>
							</span>
						</button>
					</>
				)}
			</div>
		</div>
	)
}

export default ProjectCard
